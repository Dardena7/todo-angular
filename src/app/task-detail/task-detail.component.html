<div class="container">
    <app-navigation></app-navigation>
    <h1>Task Details</h1>
    <hr>
    <div class="row">
        <div class="col-12">
            <button class="btn btn-info" type="button" data-toggle="collapse" data-target="#edit-task" aria-expanded="false" aria-controls="edit-task">
                Edit task
            </button>
            <div class="collapse" id="edit-task" *ngIf='taskEdit'>
                <form (ngSubmit)='onSubmit(form)' #form='ngForm'>
                    <div class="form-group">
                        <label for="name"><span class='label'>Task Name</span>  (Must not be empty & Max 20 characters)</label>
                        <input type="name" class="form-control" name="name" id="name" [(ngModel)]='taskEdit.name' >
                    </div>
                    <div class="form-group">
                        <label for="description"><span class='label'>Task Description</span>  (Must contains between 10 & 200 characters)</label>
                        <input type="description" class="form-control" name="description" id="description" [(ngModel)]='taskEdit.description' >
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select class="form-control" name="status" id="status" [(ngModel)]='taskEdit.isDone' required>
                            <option [value]='true'>Done</option>
                            <option [value]='false'>Todo</option>
                        </select>
                    </div>
                    <button type='submit' class='btn btn-info' [disabled]='!form.valid'>Save</button>
                </form>
                <div class="alert alert-danger" *ngIf="errors">
                    <p *ngFor="let error of errors">{{error}}</p>
                </div>
                <div class="alert alert-success" *ngIf="success">
                    <p>{{success}}</p>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row" *ngIf='task'>
        <div class="col-12">
            <p><span class="property">Status : </span>{{task.isDone ? 'Done' : 'Todo'}}</p>
            <p><span class="property">Name : </span>{{task.name}}</p>
            <p><span class="property">Description : </span>{{task.description}}</p>
            <button class='btn btn-dark' (click)='onBack()'>Back</button> |
            <button class='btn btn-danger' (click)='onDelete()'>Supprimer</button>
        </div>
    </div>
</div>
